<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPeccy Web Installer</title>
    <style>
        @font-face {
            font-family: 'zxSpectrum';
            src: url('fonts/zxSpectrumStrict.ttf') format('truetype');
        }

        :root {
            --primary-color: #ff5722;
            --secondary-color: #ff7043;
            --accent-color: #ffab40;
            --background-color: #121212;
            --card-color: #1e1e1e;
            --text-color: #e0e0e0;
            --light-text: #ffffff;
            --border-color: #333;
            --button-text: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .spectrum-font {
            font-family: 'zxSpectrum', monospace;
        }

        header {
            background: linear-gradient(135deg, #000000, #1a1a1a);
            color: var(--light-text);
            text-align: center;
            padding: 2rem 0;
            border-bottom: 1px solid var(--primary-color);
            position: relative;
        }

        .language-selector {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        .language-selector select {
            background-color: var(--card-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 0.3rem;
            border-radius: 4px;
        }

        .logo-container {
            max-width: 400px;
            margin: 0 auto 1rem;
        }

        .logo-container img {
            max-width: 100%;
            height: auto;
        }

        h1 {
            margin: 0;
            font-size: 2.2rem;
            color: var(--primary-color);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 0.5rem;
            color: var(--accent-color);
        }

        main {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 2rem;
            flex: 1;
        }

        .card {
            background: var(--card-color);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--primary-color);
            margin-top: 0;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .firmware-selector {
            margin: 1.5rem 0;
        }

        select {
            width: 100%;
            padding: 0.8rem;
            border-radius: 6px;
            background-color: #2a2a2a;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            font-size: 1rem;
        }

        select:hover {
            border-color: var(--accent-color);
        }

        .install-button-container {
            text-align: center;
            margin: 2rem 0;
        }

        esp-web-install-button {
          --esp-tools-button-background: var(--primary-color);
          --esp-tools-button-color: white;
          --esp-tools-button-text-color: black;
          --esp-tools-button-background-hover: var(--secondary-color);
          --esp-tools-border-radius: 6px;
          --esp-tools-button-padding: 0.8rem 1.5rem;
          --esp-tools-button-font-size: 1rem;
          --esp-tools-button-font-weight: bold;
          margin: 0 auto;
        }

        .invisible {
            opacity: 0;
            pointer-events: none;
        }

        .instructions {
            margin-top: 2rem;
        }

        .steps {
            padding-left: 1.5rem;
        }

        .steps li {
            margin-bottom: 0.8rem;
        }

        .donate-button {
            margin: 1rem 0;
            text-align: center;
        }

        .donate-button a {
            display: inline-block;
            background-color: #0070ba;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .donate-button a:hover {
            background-color: #005ea6;
        }

        footer {
            background-color: #000000;
            color: var(--light-text);
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
            border-top: 1px solid var(--primary-color);
        }

        footer a {
            color: var(--accent-color);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .footer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .logo-container {
                max-width: 300px;
            }

            .footer-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="language-selector">
            <select id="language-select">
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="pt">Português</option>
            </select>
        </div>
        <div class="logo-container">
            <img src="https://github.com/SplinterGU/ESPeccy/blob/master/logos/ESPeccy.png?raw=true" alt="ESPeccy Logo">
        </div>
        <h1 class="spectrum-font">ESPeccy Web Installer</h1>
        <p class="subtitle spectrum-font">ZX Spectrum emulator for ESP32</p>
    </header>

    <main>
        <div class="card">
            <h2 class="spectrum-font">Easy Installation</h2>
            <p>Select the firmware version you want to install and follow the instructions to load ESPeccy directly from your web browser.</p>

            <div class="firmware-selector">
                <select id="firmware-select">
                    <option value="2508101508-complete_firmware">ESPeccy Firmware (2025/08/10 15:08)</option>
                    <option value="2508101508-complete_firmware_nopsram">ESPeccy Firmware No-PSRAM (2025/08/10 15:08)</option>
                    <option value="2508062230-complete_firmware">ESPeccy Firmware (2025/08/06 22:30)</option>
                    <option value="2508062230-complete_firmware_nopsram">ESPeccy Firmware No-PSRAM (2025/08/06 22:30)</option>
                    <option value="2507290208-complete_firmware">ESPeccy Firmware (2025/07/29 02:08)</option>
                    <option value="2507290208-complete_firmware_nopsram">ESPeccy Firmware No-PSRAM (2025/07/29 02:08)</option>
                    <option value="2507272054-complete_firmware">ESPeccy Firmware (2025/07/27 20:54)</option>
                    <option value="2507272054-complete_firmware_nopsram">ESPeccy Firmware No-PSRAM (2025/07/27 20:54)</option>
                    <option value="2504261505-complete_firmware">ESPeccy Firmware (2025/04/26 15:05)</option>
                    <option value="2504261505-complete_firmware_nopsram">ESPeccy Firmware No-PSRAM (2025/04/26 15:05)</option>
                </select>
            </div>

            <div class="install-button-container">
                <esp-web-install-button class="invisible"></esp-web-install-button>
            </div>

            <div class="donate-button">
                <a href="https://www.paypal.com/paypalme/bennugd?country.x=AR&locale.x=es_XC" target="_blank">Donate via PayPal</a>
            </div>

            <div class="instructions">
                <h3 class="spectrum-font">Instructions:</h3>
                <ol class="steps">
                    <li>Connect your ESP32 device to your computer via USB</li>
                    <li>Select the desired firmware version</li>
                    <li>Click the "Connect" button that will appear</li>
                    <li>In the dialog that appears, select "INSTALL ESPECCY"</li>
                    <li>Wait for the installation to complete (it may take a few minutes)</li>
                    <li>Done! Enjoy ESPeccy on your device</li>
                </ol>
                <p><strong>Note:</strong> Some browsers may require additional permissions to access the device.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <a href="https://github.com/SplinterGU/ESPeccy">ESPeccy</a>
            <span>&mdash;</span>
            <span class="footer-text">ZX Spectrum emulator for ESP32</span>
            <span>&mdash;</span>
            <span>Installer powered by <a href="https://esphome.github.io/esp-web-tools/">ESP Web Tools</a></span>
        </div>
    </footer>

    <script type="module" src="https://unpkg.com/esp-web-tools@8.0.1/dist/web/install-button.js?module"></script>
    <script>
        // Firmware selection
        document.getElementById('firmware-select').addEventListener('change', (e) => {
            const button = document.querySelector('esp-web-install-button');
            button.manifest = `./${e.target.value}.json`;
            button.classList.remove('invisible');
        });

        // Initialize with first firmware selected
        document.addEventListener('DOMContentLoaded', () => {
            const select = document.getElementById('firmware-select');
            const button = document.querySelector('esp-web-install-button');
            button.manifest = `./${select.value}.json`;
            button.classList.remove('invisible');
        });

        // Language selector functionality
        const translations = {
            en: {
                title: "ESPeccy Web Installer",
                subtitle: "ZX Spectrum emulator for ESP32",
                cardTitle: "Easy Installation",
                cardText: "Select the firmware version you want to install and follow the instructions to load ESPeccy directly from your web browser.",
                instructions: "Instructions:",
                steps: [
                    "Connect your ESP32 device to your computer via USB",
                    "Select the desired firmware version",
                    "Click the \"Connect\" button that will appear",
                    "In the dialog that appears, select \"INSTALL ESPECCY\"",
                    "Wait for the installation to complete (it may take a few minutes)",
                    "Done! Enjoy ESPeccy on your device"
                ],
                note: "Note: Some browsers may require additional permissions to access the device.",
                footerText: "ZX Spectrum emulator for ESP32",
                donateText: "Donate via PayPal"
            },
            es: {
                title: "Instalador Web de ESPeccy",
                subtitle: "Emulador de Spectrum para ESP32",
                cardTitle: "Instalación Fácil",
                cardText: "Selecciona la versión de firmware que deseas instalar y sigue las instrucciones para cargar ESPeccy directamente desde tu navegador web.",
                instructions: "Instrucciones:",
                steps: [
                    "Conecta tu dispositivo ESP32 al ordenador mediante USB",
                    "Selecciona la versión de firmware deseada",
                    "Haz clic en el botón \"Connect\" que aparecerá",
                    "En el diálogo que aparece, selecciona \"INSTALL ESPECCY\"",
                    "Espera a que complete la instalación (puede tardar unos minutos)",
                    "¡Listo! Disfruta de ESPeccy en tu dispositivo"
                ],
                note: "Nota: Algunos navegadores pueden requerir permisos adicionales para acceder al dispositivo.",
                footerText: "Emulador de Spectrum para ESP32",
                donateText: "Donar via PayPal"
            },
            pt: {
                title: "Instalador Web do ESPeccy",
                subtitle: "Emulador de Spectrum para ESP32",
                cardTitle: "Instalação Fácil",
                cardText: "Selecione a versão do firmware que deseja instalar e siga as instruções para carregar o ESPeccy diretamente do seu navegador web.",
                instructions: "Instruções:",
                steps: [
                    "Conecte seu dispositivo ESP32 ao computador via USB",
                    "Selecione a versão do firmware desejada",
                    "Clique no botão \"Connect\" que aparecerá",
                    "Na caixa de diálogo que aparece, selecione \"INSTALL ESPECCY\"",
                    "Aguarde a instalação ser concluída (pode levar alguns minutos)",
                    "Pronto! Aproveite o ESPeccy no seu dispositivo"
                ],
                note: "Nota: Alguns navegadores podem exigir permissões adicionais para acessar o dispositivo.",
                footerText: "Emulador de Spectrum para ESP32",
                donateText: "Doar via PayPal"
            }
        };

        document.getElementById('language-select').addEventListener('change', (e) => {
            const lang = e.target.value;
            const t = translations[lang];

            // Update UI elements
            document.querySelector('h1').textContent = t.title;
            document.querySelector('.subtitle').textContent = t.subtitle;
            document.querySelector('.card h2').textContent = t.cardTitle;
            document.querySelector('.card > p').textContent = t.cardText;
            document.querySelector('.instructions h3').textContent = t.instructions;
            document.querySelector('.donate-button a').textContent = t.donateText;

            // Update steps
            const steps = document.querySelectorAll('.steps li');
            t.steps.forEach((step, i) => {
                if (steps[i]) steps[i].textContent = step;
            });

            // Update note
            const noteParts = t.note.split(':');
            document.querySelector('.instructions p strong').textContent = noteParts[0] + ':';
            if (noteParts[1]) {
                document.querySelector('.instructions p').lastChild.textContent = ' ' + noteParts[1].trim();
            }

            // Update footer text
            document.querySelector('.footer-text').textContent = t.footerText;
        });
    </script>
</body>
</html>